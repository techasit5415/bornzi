# ЁЯУЪ PDF RAG Chatbot - Configuration Guide

## ЁЯОп р╕Бр╕▓р╕гр╕Хр╕▒р╣Йр╕Зр╕Др╣Ир╕▓р╕кр╕│р╕лр╕гр╕▒р╕Ър╣Ар╕нр╕Бр╕кр╕▓р╕гр╕Ыр╕гр╕░р╣Ар╕ар╕Чр╕Хр╣Ир╕▓р╕Зр╣Ж

### 1. р╣Ар╕нр╕Бр╕кр╕▓р╕гр╕лр╕ер╕▒р╕Бр╕кр╕╣р╕Хр╕г / р╕гр╕▓р╕вр╕зр╕┤р╕Кр╕▓
**р╕ер╕▒р╕Бр╕йр╕Ур╕░:** р╕Хр╕▓р╕гр╕▓р╕З р╕гр╕лр╕▒р╕кр╕зр╕┤р╕Кр╕▓ р╕гр╕▓р╕вр╕Бр╕▓р╕г
```python
chunk_size = 1500-2000
chunk_overlap = 300-400
search_k = 10
fetch_k = 30
lambda_mult = 0.5  # р╣Ар╕Щр╣Йр╕Щр╕Др╕зр╕▓р╕бр╕лр╕ер╕▓р╕Бр╕лр╕ер╕▓р╕в
temperature = 0    # р╕Др╕зр╕▓р╕бр╣Бр╕бр╣Ир╕Щр╕вр╕│р╕кр╕╣р╕З
```

### 2. р╣Ар╕нр╕Бр╕кр╕▓р╕гр╕Чр╕▒р╣Ир╕зр╣Др╕Ы / р╕Ър╕Чр╕Др╕зр╕▓р╕б
**р╕ер╕▒р╕Бр╕йр╕Ур╕░:** р╕Вр╣Йр╕нр╕Др╕зр╕▓р╕бр╕вр╕▓р╕з р╕вр╣Ир╕нр╕лр╕Щр╣Йр╕▓р╕Хр╣Ир╕нр╣Ар╕Щр╕╖р╣Ир╕нр╕З
```python
chunk_size = 1000-1500
chunk_overlap = 200-300
search_k = 6-8
fetch_k = 20
lambda_mult = 0.7  # р╕кр╕бр╕Фр╕╕р╕е
temperature = 0.1
```

### 3. р╣Ар╕нр╕Бр╕кр╕▓р╕гр╣Ар╕Чр╕Др╕Щр╕┤р╕Д / Manual
**р╕ер╕▒р╕Бр╕йр╕Ур╕░:** р╕Вр╕▒р╣Йр╕Щр╕Хр╕нр╕Щ р╕гр╕▓р╕вр╕ер╕░р╣Ар╕нр╕╡р╕вр╕Фр╣Ар╕Йр╕Юр╕▓р╕░
```python
chunk_size = 800-1000
chunk_overlap = 200
search_k = 8
fetch_k = 20
lambda_mult = 0.8  # р╣Ар╕Щр╣Йр╕Щр╕Др╕зр╕▓р╕бр╣Ар╕Бр╕╡р╣Ир╕вр╕зр╕Вр╣Йр╕нр╕З
temperature = 0
```

### 4. р╣Ар╕нр╕Бр╕кр╕▓р╕гр╕кр╕▒р╣Йр╕Щ / FAQ
**р╕ер╕▒р╕Бр╕йр╕Ур╕░:** р╕Др╕│р╕Цр╕▓р╕б-р╕Др╕│р╕Хр╕нр╕Ър╕кр╕▒р╣Йр╕Щр╣Ж
```python
chunk_size = 500-800
chunk_overlap = 100-150
search_k = 5-6
fetch_k = 15
lambda_mult = 0.8
temperature = 0.1
```

## ЁЯФз р╕Юр╕▓р╕гр╕▓р╕бр╕┤р╣Ар╕Хр╕нр╕гр╣Мр╕кр╕│р╕Др╕▒р╕Н

### Chunk Size & Overlap
- **chunk_size**: р╕Вр╕Щр╕▓р╕Фр╕Вр╕нр╕Зр╣Бр╕Хр╣Ир╕ер╕░ chunk (characters)
  - р╣Ар╕ер╣Зр╕Б (500-800): FAQ, р╣Ар╕нр╕Бр╕кр╕▓р╕гр╕кр╕▒р╣Йр╕Щ
  - р╕Бр╕ер╕▓р╕З (1000-1500): р╣Ар╕нр╕Бр╕кр╕▓р╕гр╕Чр╕▒р╣Ир╕зр╣Др╕Ы
  - р╣Гр╕лр╕Нр╣И (1500-2000): р╕лр╕ер╕▒р╕Бр╕кр╕╣р╕Хр╕г, р╕Хр╕▓р╕гр╕▓р╕З

- **chunk_overlap**: р╕кр╣Ир╕зр╕Щр╕Чр╕╡р╣Ир╕Лр╣Йр╕нр╕Щр╕Чр╕▒р╕Ър╕гр╕░р╕лр╕зр╣Ир╕▓р╕З chunks
  - 15-20% р╕Вр╕нр╕З chunk_size
  - р╣Ар╕Юр╕┤р╣Ир╕бр╣Ар╕Юр╕╖р╣Ир╕нр╕гр╕▒р╕Бр╕йр╕▓р╕Ър╕гр╕┤р╕Ър╕Чр╕Вр╣Йр╕▓р╕бр╕лр╕Щр╣Йр╕▓

### Retrieval Parameters
- **k**: р╕Ир╕│р╕Щр╕зр╕Щ documents р╕Чр╕╡р╣Ир╣Ар╕ер╕╖р╕нр╕Бр╣Гр╕Кр╣Й
  - 5-6: р╣Ар╕нр╕Бр╕кр╕▓р╕гр╕кр╕▒р╣Йр╕Щ, р╕Др╕│р╕Цр╕▓р╕бр╣Ар╕Йр╕Юр╕▓р╕░р╣Ар╕Ир╕▓р╕░р╕Ир╕З
  - 8-10: р╣Ар╕нр╕Бр╕кр╕▓р╕гр╕Бр╕ер╕▓р╕З-р╣Гр╕лр╕Нр╣И, р╕гр╕▓р╕вр╕Бр╕▓р╕г

- **fetch_k**: р╕Ир╕│р╕Щр╕зр╕Щ candidates р╕Бр╣Ир╕нр╕Щр╣Ар╕ер╕╖р╕нр╕Б
  - р╣Бр╕Щр╕░р╕Щр╕│: 2-3 р╣Ар╕Чр╣Ир╕▓р╕Вр╕нр╕З k

- **lambda_mult**: р╕кр╕бр╕Фр╕╕р╕ер╕Др╕зр╕▓р╕бр╣Ар╕Бр╕╡р╣Ир╕вр╕зр╕Вр╣Йр╕нр╕З vs р╕лр╕ер╕▓р╕Бр╕лр╕ер╕▓р╕в
  - 0.0 = р╕лр╕ер╕▓р╕Бр╕лр╕ер╕▓р╕вр╕кр╕╣р╕Зр╕кр╕╕р╕Ф
  - 1.0 = р╣Ар╕Бр╕╡р╣Ир╕вр╕зр╕Вр╣Йр╕нр╕Зр╕кр╕╣р╕Зр╕кр╕╕р╕Ф
  - р╣Бр╕Щр╕░р╕Щр╕│: 0.5-0.7

### LLM Parameters
- **temperature**: р╕Др╕зр╕▓р╕бр╕кр╕гр╣Йр╕▓р╕Зр╕кр╕гр╕гр╕Др╣М
  - 0 = р╣Бр╕бр╣Ир╕Щр╕вр╕│р╕кр╕╣р╕Зр╕кр╕╕р╕Ф (р╕лр╕ер╕▒р╕Бр╕кр╕╣р╕Хр╕г, р╕Вр╣Йр╕нр╕бр╕╣р╕е)
  - 0.1-0.3 = р╕кр╕бр╕Фр╕╕р╕е (р╕Чр╕▒р╣Ир╕зр╣Др╕Ы)
  - 0.5+ = р╕кр╕гр╣Йр╕▓р╕Зр╕кр╕гр╕гр╕Др╣М (р╕Ър╕Чр╕кр╕гр╕╕р╕Ы)

- **num_ctx**: context window
  - р╣Бр╕Щр╕░р╕Щр╕│: 4096-8192
  - р╣Ар╕Юр╕┤р╣Ир╕бр╕Цр╣Йр╕▓р╕бр╕╡ documents р╣Ар╕вр╕нр╕░

## ЁЯТб Tips р╕кр╕│р╕лр╕гр╕▒р╕Ър╕Ьр╕ер╕ер╕▒р╕Юр╕Шр╣Мр╕Чр╕╡р╣Ир╕Фр╕╡

1. **р╕Ыр╕гр╕▒р╕Ъ Prompt р╣Гр╕лр╣Йр╕Кр╕▒р╕Фр╣Ар╕Ир╕Щ** - р╕Ър╕нр╕Б LLM р╕зр╣Ир╕▓р╕Хр╣Йр╕нр╕Зр╕Бр╕▓р╕гр╕нр╕░р╣Др╕г
2. **р╣Гр╕Кр╣Й MMR р╣Бр╕Чр╕Щ Similarity** - р╣Др╕Фр╣Йр╕Вр╣Йр╕нр╕бр╕╣р╕ер╕лр╕ер╕▓р╕Бр╕лр╕ер╕▓р╕вр╕Бр╕зр╣Ир╕▓
3. **р╣Ар╕Юр╕┤р╣Ир╕б k р╕кр╕│р╕лр╕гр╕▒р╕Ър╕гр╕▓р╕вр╕Бр╕▓р╕г** - р╕Цр╣Йр╕▓р╕Др╕│р╕Цр╕▓р╕бр╕Хр╣Йр╕нр╕Зр╕Бр╕▓р╕гр╕лр╕ер╕▓р╕вр╕Др╕│р╕Хр╕нр╕Ъ
4. **р╕ер╕Ф temperature** - р╕кр╕│р╕лр╕гр╕▒р╕Ър╕Вр╣Йр╕нр╕бр╕╣р╕ер╕Чр╕╡р╣Ир╕Хр╣Йр╕нр╕Зр╕Бр╕▓р╕гр╕Др╕зр╕▓р╕бр╣Бр╕бр╣Ир╕Щр╕вр╕│
5. **р╕Хр╕гр╕зр╕Ир╕кр╕нр╕Ъ source documents** - р╕Фр╕╣р╕зр╣Ир╕▓ retrieve р╕Цр╕╣р╕Бр╕лр╕гр╕╖р╕нр╣Др╕бр╣И

## ЁЯРЫ р╣Бр╕Бр╣Йр╣Др╕Вр╕Ыр╕▒р╕Нр╕лр╕▓

### р╕Хр╕нр╕Ър╣Др╕бр╣Ир╕Др╕гр╕Ъ
- тЬЕ р╣Ар╕Юр╕┤р╣Ир╕б k р╣Бр╕ер╕░ fetch_k
- тЬЕ р╕ер╕Ф lambda_mult (р╣Ар╕Щр╣Йр╕Щр╕лр╕ер╕▓р╕Бр╕лр╕ер╕▓р╕в)
- тЬЕ р╣Ар╕Юр╕┤р╣Ир╕б chunk_overlap
- тЬЕ р╕Ыр╕гр╕▒р╕Ъ prompt р╣Гр╕лр╣Йр╕Ър╕▒р╕Зр╕Др╕▒р╕Ър╕Хр╕нр╕Ър╕Др╕гр╕Ъ

### р╕Хр╕нр╕Ър╕Ьр╕┤р╕Ф / р╕лр╕ер╕нр╕Щ
- тЬЕ р╕ер╕Ф temperature р╣Ар╕Ыр╣Зр╕Щ 0
- тЬЕ р╣Ар╕Юр╕┤р╣Ир╕бр╕Бр╕Ор╣Гр╕Щ prompt
- тЬЕ р╣Ар╕Юр╕┤р╣Ир╕б lambda_mult (р╣Ар╕Щр╣Йр╕Щр╕Др╕зр╕▓р╕бр╣Ар╕Бр╕╡р╣Ир╕вр╕зр╕Вр╣Йр╕нр╕З)

### р╕Кр╣Йр╕▓
- тЬЕ р╕ер╕Ф k р╣Бр╕ер╕░ fetch_k
- тЬЕ р╕ер╕Ф chunk_size
- тЬЕ р╣Гр╕Кр╣Й embedding model р╕Чр╕╡р╣Ир╣Ар╕ер╣Зр╕Бр╕Бр╕зр╣Ир╕▓

### р╣Гр╕Кр╣Й memory р╣Ар╕вр╕нр╕░
- тЬЕ р╕ер╕Ф num_ctx
- тЬЕ р╕ер╕Ф chunk_size
- тЬЕ р╕ер╕Ф k
